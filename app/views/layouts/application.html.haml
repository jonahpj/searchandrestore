!!!
%html
  %head
    %title Searchandrestore
    = stylesheet_link_tag 'base'
    - if @uses_datepicker
      = stylesheet_link_tag 'jquery_ui'
    = csrf_meta_tag

  - body_attributes = {:class => @page_class}
  - if @uses_gmap
    -  body_attributes.merge!({:onload => 'initialize();',:onunload => 'GUnload();'})

  %body.jazz{body_attributes}
  
    - if flash[:notice]
      .flash#notice
        = flash[:notice]

    - if flash[:alert]
      .flash#alert
        = flash[:alert]
    

    .masthead
      .site-container
        .masthead-top
          = image_tag('logo.png', :alt => 'Search and Restore', :id => 'logo')
        %ul.nav
          %li
            %a{:href => '#'} Home
          %li#nav-shows
            %a{:href => '/home/shows'} Shows
          %li#nav-artists
            %a{:href => '/home/artists_landing'} Artists
          %li#nav-venues
            %a{:href => '/home/venues_landing'} Venues
          %li#nav-video
            %a{:href => '/home/video_landing'} Video
          %li#nav-about
            %a{:href => '/home/about'} About
          %li#nav-resources
            %a{:href => '/home/resources'} Resources
          %li#nav-donate
            %a{:href => '/home/donate'} Donate
    .site-container#main-content
      = yield

    = javascript_include_tag ['jquery-5.1.min.js', 'jquery-ui-1.8.13.custom.min.js']

      

    - if @uses_gmap
      -# GMAP_KEY
      %script{:src => "http://maps.google.com/maps/api/js?sensor=false"}
  
      :javascript
        function initialize() {
          var latlng = new google.maps.LatLng(40.724001, -73.992837);
          var myOptions = {
            zoom: 12,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map_canvas"),
              myOptions);
          
          var coords = [
            {lat:40.724001, lng:-73.992837},
            {lng:-74.000692, lat:40.726422}
          ];

          $(coords).each(function(c, coord) {
            var marker = new google.maps.Marker({
                  position: new google.maps.LatLng(coord.lat,coord.lng),
                  title:"Hello World!"
            });
            
            // To add the marker to the map, call setMap();
            marker.setMap(map);  
          });
          
        }
        
        //40.724001, -73.992837
        //-74.000692 40.726422 
        //var map = null;
        //if (GBrowserIsCompatible()) {
        //    map = new GMap2(document.getElementById('map_canvas'));
        //    map.setUIToDefault();
        //    var geocoder = new GClientGeocoder();
        //    var address = "75 9th St, 11216, Brooklyn, NY";
        //    geocoder.getLatLng(
        //        address,
        //        function(point) {
        //          if (!point) {
        //            return;
        //          }
        //          map.setCenter(point, 13);
        //          marker = new GMarker(point);
        //          map.addOverlay(marker);
        //        }
        //    );
        //}    

    - if @uses_datepicker
      :javascript
        $(function() {
          $('#datepicker').datepicker({
            inline: true
          });
        });

    - if @has_video
      :javascript
        $(function() {
          $('ul').delegate('[data-video]', 'click', function(e) {
            var src = $(this).attr('data-video');
            var the_frame = $('#video-player');
            the_frame.attr('src',src);
            e.preventDefault();
          });
        });
